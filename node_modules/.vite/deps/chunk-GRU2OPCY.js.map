{
  "version": 3,
  "sources": ["../../@vaadin/component-base/src/dom-utils.js"],
  "sourcesContent": ["/**\n * @license\n * Copyright (c) 2021 - 2024 Vaadin Ltd.\n * This program is available under Apache License Version 2.0, available at https://vaadin.com/license/\n */\n\n/**\n * Returns an array of ancestor root nodes for the given node.\n *\n * A root node is either a document node or a document fragment node (Shadow Root).\n * The array is collected by a bottom-up DOM traversing that starts with the given node\n * and involves both the light DOM and ancestor shadow DOM trees.\n *\n * @param {Node} node\n * @return {Node[]}\n */\nexport function getAncestorRootNodes(node) {\n  const result = [];\n\n  while (node) {\n    if (node.nodeType === Node.DOCUMENT_NODE) {\n      result.push(node);\n      break;\n    }\n\n    if (node.nodeType === Node.DOCUMENT_FRAGMENT_NODE) {\n      result.push(node);\n      node = node.host;\n      continue;\n    }\n\n    if (node.assignedSlot) {\n      node = node.assignedSlot;\n      continue;\n    }\n\n    node = node.parentNode;\n  }\n\n  return result;\n}\n\n/**\n * Returns the list of flattened elements for the given `node`.\n * This list consists of a node's children and, for any children that are\n * `<slot>` elements, the expanded flattened list of `assignedElements`.\n *\n * @param {Node} node\n * @return {Element[]}\n */\nexport function getFlattenedElements(node) {\n  const result = [];\n  let elements;\n  if (node.localName === 'slot') {\n    elements = node.assignedElements();\n  } else {\n    result.push(node);\n    elements = [...node.children];\n  }\n  elements.forEach((elem) => result.push(...getFlattenedElements(elem)));\n  return result;\n}\n\n/**\n * Traverses the given node and its parents, including those that are across\n * the shadow root boundaries, until it finds a node that matches the selector.\n *\n * @param {string} selector The CSS selector to match against\n * @param {Node} node The starting node for the traversal\n * @return {Node | null} The closest matching element, or null if no match is found\n */\nexport function getClosestElement(selector, node) {\n  if (!node) {\n    return null;\n  }\n\n  return node.closest(selector) || getClosestElement(selector, node.getRootNode().host);\n}\n\n/**\n * Takes a string with values separated by space and returns a set the values\n *\n * @param {string} value\n * @return {Set<string>}\n */\nexport function deserializeAttributeValue(value) {\n  if (!value) {\n    return new Set();\n  }\n\n  return new Set(value.split(' '));\n}\n\n/**\n * Takes a set of string values and returns a string with values separated by space\n *\n * @param {Set<string>} values\n * @return {string}\n */\nexport function serializeAttributeValue(values) {\n  return values ? [...values].join(' ') : '';\n}\n\n/**\n * Adds a value to an attribute containing space-delimited values.\n *\n * @param {HTMLElement} element\n * @param {string} attr\n * @param {string} value\n */\nexport function addValueToAttribute(element, attr, value) {\n  const values = deserializeAttributeValue(element.getAttribute(attr));\n  values.add(value);\n  element.setAttribute(attr, serializeAttributeValue(values));\n}\n\n/**\n * Removes a value from an attribute containing space-delimited values.\n * If the value is the last one, the whole attribute is removed.\n *\n * @param {HTMLElement} element\n * @param {string} attr\n * @param {string} value\n */\nexport function removeValueFromAttribute(element, attr, value) {\n  const values = deserializeAttributeValue(element.getAttribute(attr));\n  values.delete(value);\n  if (values.size === 0) {\n    element.removeAttribute(attr);\n    return;\n  }\n  element.setAttribute(attr, serializeAttributeValue(values));\n}\n\n/**\n * Returns true if the given node is an empty text node, false otherwise.\n *\n * @param {Node} node\n * @return {boolean}\n */\nexport function isEmptyTextNode(node) {\n  return node.nodeType === Node.TEXT_NODE && node.textContent.trim() === '';\n}\n"],
  "mappings": ";AAgBO,SAAS,qBAAqB,MAAM;AACzC,QAAM,SAAS,CAAC;AAEhB,SAAO,MAAM;AACX,QAAI,KAAK,aAAa,KAAK,eAAe;AACxC,aAAO,KAAK,IAAI;AAChB;AAAA,IACF;AAEA,QAAI,KAAK,aAAa,KAAK,wBAAwB;AACjD,aAAO,KAAK,IAAI;AAChB,aAAO,KAAK;AACZ;AAAA,IACF;AAEA,QAAI,KAAK,cAAc;AACrB,aAAO,KAAK;AACZ;AAAA,IACF;AAEA,WAAO,KAAK;AAAA,EACd;AAEA,SAAO;AACT;AAUO,SAAS,qBAAqB,MAAM;AACzC,QAAM,SAAS,CAAC;AAChB,MAAI;AACJ,MAAI,KAAK,cAAc,QAAQ;AAC7B,eAAW,KAAK,iBAAiB;AAAA,EACnC,OAAO;AACL,WAAO,KAAK,IAAI;AAChB,eAAW,CAAC,GAAG,KAAK,QAAQ;AAAA,EAC9B;AACA,WAAS,QAAQ,CAAC,SAAS,OAAO,KAAK,GAAG,qBAAqB,IAAI,CAAC,CAAC;AACrE,SAAO;AACT;AAUO,SAAS,kBAAkB,UAAU,MAAM;AAChD,MAAI,CAAC,MAAM;AACT,WAAO;AAAA,EACT;AAEA,SAAO,KAAK,QAAQ,QAAQ,KAAK,kBAAkB,UAAU,KAAK,YAAY,EAAE,IAAI;AACtF;AAQO,SAAS,0BAA0B,OAAO;AAC/C,MAAI,CAAC,OAAO;AACV,WAAO,oBAAI,IAAI;AAAA,EACjB;AAEA,SAAO,IAAI,IAAI,MAAM,MAAM,GAAG,CAAC;AACjC;AAQO,SAAS,wBAAwB,QAAQ;AAC9C,SAAO,SAAS,CAAC,GAAG,MAAM,EAAE,KAAK,GAAG,IAAI;AAC1C;AASO,SAAS,oBAAoB,SAAS,MAAM,OAAO;AACxD,QAAM,SAAS,0BAA0B,QAAQ,aAAa,IAAI,CAAC;AACnE,SAAO,IAAI,KAAK;AAChB,UAAQ,aAAa,MAAM,wBAAwB,MAAM,CAAC;AAC5D;AAUO,SAAS,yBAAyB,SAAS,MAAM,OAAO;AAC7D,QAAM,SAAS,0BAA0B,QAAQ,aAAa,IAAI,CAAC;AACnE,SAAO,OAAO,KAAK;AACnB,MAAI,OAAO,SAAS,GAAG;AACrB,YAAQ,gBAAgB,IAAI;AAC5B;AAAA,EACF;AACA,UAAQ,aAAa,MAAM,wBAAwB,MAAM,CAAC;AAC5D;AAQO,SAAS,gBAAgB,MAAM;AACpC,SAAO,KAAK,aAAa,KAAK,aAAa,KAAK,YAAY,KAAK,MAAM;AACzE;",
  "names": []
}
