{
  "version": 3,
  "sources": ["../../ol/src/style/IconAnchorUnits.js", "../../ol/src/style/IconOrigin.js", "../../ol/src/style/IconImageCache.js", "../../ol/src/style/IconImage.js", "../../ol/src/style/Icon.js"],
  "sourcesContent": ["/**\n * @module ol/style/IconAnchorUnits\n */\n\n/**\n * Icon anchor units. One of 'fraction', 'pixels'.\n * @enum {string}\n */\nexport default {\n  /**\n   * Anchor is a fraction\n   * @api\n   */\n  FRACTION: 'fraction',\n  /**\n   * Anchor is in pixels\n   * @api\n   */\n  PIXELS: 'pixels',\n};\n", "/**\n * @module ol/style/IconOrigin\n */\n\n/**\n * Icon origin. One of 'bottom-left', 'bottom-right', 'top-left', 'top-right'.\n * @enum {string}\n */\nexport default {\n  /**\n   * Origin is at bottom left\n   * @api\n   */\n  BOTTOM_LEFT: 'bottom-left',\n  /**\n   * Origin is at bottom right\n   * @api\n   */\n  BOTTOM_RIGHT: 'bottom-right',\n  /**\n   * Origin is at top left\n   * @api\n   */\n  TOP_LEFT: 'top-left',\n  /**\n   * Origin is at top right\n   * @api\n   */\n  TOP_RIGHT: 'top-right',\n};\n", "/**\n * @module ol/style/IconImageCache\n */\nimport {asString} from '../color.js';\n\n/**\n * @classdesc\n * Singleton class. Available through {@link module:ol/style/IconImageCache.shared}.\n */\nclass IconImageCache {\n  constructor() {\n    /**\n     * @type {!Object<string, import(\"./IconImage.js\").default>}\n     * @private\n     */\n    this.cache_ = {};\n\n    /**\n     * @type {number}\n     * @private\n     */\n    this.cacheSize_ = 0;\n\n    /**\n     * @type {number}\n     * @private\n     */\n    this.maxCacheSize_ = 32;\n  }\n\n  /**\n   * FIXME empty description for jsdoc\n   */\n  clear() {\n    this.cache_ = {};\n    this.cacheSize_ = 0;\n  }\n\n  /**\n   * @return {boolean} Can expire cache.\n   */\n  canExpireCache() {\n    return this.cacheSize_ > this.maxCacheSize_;\n  }\n\n  /**\n   * FIXME empty description for jsdoc\n   */\n  expire() {\n    if (this.canExpireCache()) {\n      let i = 0;\n      for (const key in this.cache_) {\n        const iconImage = this.cache_[key];\n        if ((i++ & 3) === 0 && !iconImage.hasListener()) {\n          delete this.cache_[key];\n          --this.cacheSize_;\n        }\n      }\n    }\n  }\n\n  /**\n   * @param {string} src Src.\n   * @param {?string} crossOrigin Cross origin.\n   * @param {import(\"../color.js\").Color} color Color.\n   * @return {import(\"./IconImage.js\").default} Icon image.\n   */\n  get(src, crossOrigin, color) {\n    const key = getKey(src, crossOrigin, color);\n    return key in this.cache_ ? this.cache_[key] : null;\n  }\n\n  /**\n   * @param {string} src Src.\n   * @param {?string} crossOrigin Cross origin.\n   * @param {import(\"../color.js\").Color} color Color.\n   * @param {import(\"./IconImage.js\").default} iconImage Icon image.\n   */\n  set(src, crossOrigin, color, iconImage) {\n    const key = getKey(src, crossOrigin, color);\n    this.cache_[key] = iconImage;\n    ++this.cacheSize_;\n  }\n\n  /**\n   * Set the cache size of the icon cache. Default is `32`. Change this value when\n   * your map uses more than 32 different icon images and you are not caching icon\n   * styles on the application level.\n   * @param {number} maxCacheSize Cache max size.\n   * @api\n   */\n  setSize(maxCacheSize) {\n    this.maxCacheSize_ = maxCacheSize;\n    this.expire();\n  }\n}\n\n/**\n * @param {string} src Src.\n * @param {?string} crossOrigin Cross origin.\n * @param {import(\"../color.js\").Color} color Color.\n * @return {string} Cache key.\n */\nfunction getKey(src, crossOrigin, color) {\n  const colorString = color ? asString(color) : 'null';\n  return crossOrigin + ':' + src + ':' + colorString;\n}\n\nexport default IconImageCache;\n\n/**\n * The {@link module:ol/style/IconImageCache~IconImageCache} for\n * {@link module:ol/style/Icon~Icon} images.\n * @api\n */\nexport const shared = new IconImageCache();\n", "/**\n * @module ol/style/IconImage\n */\n\nimport EventTarget from '../events/Target.js';\nimport EventType from '../events/EventType.js';\nimport ImageState from '../ImageState.js';\nimport {asString} from '../color.js';\nimport {createCanvasContext2D} from '../dom.js';\nimport {shared as iconImageCache} from './IconImageCache.js';\nimport {listenImage} from '../Image.js';\n\n/**\n * @type {CanvasRenderingContext2D}\n */\nlet taintedTestContext = null;\n\nclass IconImage extends EventTarget {\n  /**\n   * @param {HTMLImageElement|HTMLCanvasElement} image Image.\n   * @param {string|undefined} src Src.\n   * @param {import(\"../size.js\").Size} size Size.\n   * @param {?string} crossOrigin Cross origin.\n   * @param {import(\"../ImageState.js\").default} imageState Image state.\n   * @param {import(\"../color.js\").Color} color Color.\n   */\n  constructor(image, src, size, crossOrigin, imageState, color) {\n    super();\n\n    /**\n     * @private\n     * @type {HTMLImageElement|HTMLCanvasElement}\n     */\n    this.hitDetectionImage_ = null;\n\n    /**\n     * @private\n     * @type {HTMLImageElement|HTMLCanvasElement}\n     */\n    this.image_ = !image ? new Image() : image;\n\n    if (crossOrigin !== null) {\n      /** @type {HTMLImageElement} */ (this.image_).crossOrigin = crossOrigin;\n    }\n\n    /**\n     * @private\n     * @type {Object<number, HTMLCanvasElement>}\n     */\n    this.canvas_ = {};\n\n    /**\n     * @private\n     * @type {import(\"../color.js\").Color}\n     */\n    this.color_ = color;\n\n    /**\n     * @private\n     * @type {?function():void}\n     */\n    this.unlisten_ = null;\n\n    /**\n     * @private\n     * @type {import(\"../ImageState.js\").default}\n     */\n    this.imageState_ = imageState;\n\n    /**\n     * @private\n     * @type {import(\"../size.js\").Size}\n     */\n    this.size_ = size;\n\n    /**\n     * @private\n     * @type {string|undefined}\n     */\n    this.src_ = src;\n\n    /**\n     * @private\n     */\n    this.tainted_;\n  }\n\n  /**\n   * @private\n   * @return {boolean} The image canvas is tainted.\n   */\n  isTainted_() {\n    if (this.tainted_ === undefined && this.imageState_ === ImageState.LOADED) {\n      if (!taintedTestContext) {\n        taintedTestContext = createCanvasContext2D(1, 1);\n      }\n      taintedTestContext.drawImage(this.image_, 0, 0);\n      try {\n        taintedTestContext.getImageData(0, 0, 1, 1);\n        this.tainted_ = false;\n      } catch (e) {\n        taintedTestContext = null;\n        this.tainted_ = true;\n      }\n    }\n    return this.tainted_ === true;\n  }\n\n  /**\n   * @private\n   */\n  dispatchChangeEvent_() {\n    this.dispatchEvent(EventType.CHANGE);\n  }\n\n  /**\n   * @private\n   */\n  handleImageError_() {\n    this.imageState_ = ImageState.ERROR;\n    this.unlistenImage_();\n    this.dispatchChangeEvent_();\n  }\n\n  /**\n   * @private\n   */\n  handleImageLoad_() {\n    this.imageState_ = ImageState.LOADED;\n    if (this.size_) {\n      this.image_.width = this.size_[0];\n      this.image_.height = this.size_[1];\n    } else {\n      this.size_ = [this.image_.width, this.image_.height];\n    }\n    this.unlistenImage_();\n    this.dispatchChangeEvent_();\n  }\n\n  /**\n   * @param {number} pixelRatio Pixel ratio.\n   * @return {HTMLImageElement|HTMLCanvasElement} Image or Canvas element.\n   */\n  getImage(pixelRatio) {\n    this.replaceColor_(pixelRatio);\n    return this.canvas_[pixelRatio] ? this.canvas_[pixelRatio] : this.image_;\n  }\n\n  /**\n   * @param {number} pixelRatio Pixel ratio.\n   * @return {number} Image or Canvas element.\n   */\n  getPixelRatio(pixelRatio) {\n    this.replaceColor_(pixelRatio);\n    return this.canvas_[pixelRatio] ? pixelRatio : 1;\n  }\n\n  /**\n   * @return {import(\"../ImageState.js\").default} Image state.\n   */\n  getImageState() {\n    return this.imageState_;\n  }\n\n  /**\n   * @return {HTMLImageElement|HTMLCanvasElement} Image element.\n   */\n  getHitDetectionImage() {\n    if (!this.hitDetectionImage_) {\n      if (this.isTainted_()) {\n        const width = this.size_[0];\n        const height = this.size_[1];\n        const context = createCanvasContext2D(width, height);\n        context.fillRect(0, 0, width, height);\n        this.hitDetectionImage_ = context.canvas;\n      } else {\n        this.hitDetectionImage_ = this.image_;\n      }\n    }\n    return this.hitDetectionImage_;\n  }\n\n  /**\n   * Get the size of the icon (in pixels).\n   * @return {import(\"../size.js\").Size} Image size.\n   */\n  getSize() {\n    return this.size_;\n  }\n\n  /**\n   * @return {string|undefined} Image src.\n   */\n  getSrc() {\n    return this.src_;\n  }\n\n  /**\n   * Load not yet loaded URI.\n   */\n  load() {\n    if (this.imageState_ == ImageState.IDLE) {\n      this.imageState_ = ImageState.LOADING;\n      try {\n        /** @type {HTMLImageElement} */ (this.image_).src = this.src_;\n      } catch (e) {\n        this.handleImageError_();\n      }\n      this.unlisten_ = listenImage(\n        this.image_,\n        this.handleImageLoad_.bind(this),\n        this.handleImageError_.bind(this)\n      );\n    }\n  }\n\n  /**\n   * @param {number} pixelRatio Pixel ratio.\n   * @private\n   */\n  replaceColor_(pixelRatio) {\n    if (\n      !this.color_ ||\n      this.canvas_[pixelRatio] ||\n      this.imageState_ !== ImageState.LOADED\n    ) {\n      return;\n    }\n\n    const canvas = document.createElement('canvas');\n    this.canvas_[pixelRatio] = canvas;\n\n    canvas.width = Math.ceil(this.image_.width * pixelRatio);\n    canvas.height = Math.ceil(this.image_.height * pixelRatio);\n\n    const ctx = canvas.getContext('2d');\n    ctx.scale(pixelRatio, pixelRatio);\n    ctx.drawImage(this.image_, 0, 0);\n\n    ctx.globalCompositeOperation = 'multiply';\n    // Internet Explorer 11 does not support the multiply operation.\n    // If the canvas is tainted in Internet Explorer this still produces\n    // a solid color image with the shape of the icon.\n    if (ctx.globalCompositeOperation === 'multiply' || this.isTainted_()) {\n      ctx.fillStyle = asString(this.color_);\n      ctx.fillRect(0, 0, canvas.width / pixelRatio, canvas.height / pixelRatio);\n\n      ctx.globalCompositeOperation = 'destination-in';\n      ctx.drawImage(this.image_, 0, 0);\n    } else {\n      const imgData = ctx.getImageData(0, 0, canvas.width, canvas.height);\n      const data = imgData.data;\n      const r = this.color_[0] / 255.0;\n      const g = this.color_[1] / 255.0;\n      const b = this.color_[2] / 255.0;\n      const a = this.color_[3];\n\n      for (let i = 0, ii = data.length; i < ii; i += 4) {\n        data[i] *= r;\n        data[i + 1] *= g;\n        data[i + 2] *= b;\n        data[i + 3] *= a;\n      }\n      ctx.putImageData(imgData, 0, 0);\n    }\n  }\n\n  /**\n   * Discards event handlers which listen for load completion or errors.\n   *\n   * @private\n   */\n  unlistenImage_() {\n    if (this.unlisten_) {\n      this.unlisten_();\n      this.unlisten_ = null;\n    }\n  }\n}\n\n/**\n * @param {HTMLImageElement|HTMLCanvasElement} image Image.\n * @param {string} src Src.\n * @param {import(\"../size.js\").Size} size Size.\n * @param {?string} crossOrigin Cross origin.\n * @param {import(\"../ImageState.js\").default} imageState Image state.\n * @param {import(\"../color.js\").Color} color Color.\n * @return {IconImage} Icon image.\n */\nexport function get(image, src, size, crossOrigin, imageState, color) {\n  let iconImage = iconImageCache.get(src, crossOrigin, color);\n  if (!iconImage) {\n    iconImage = new IconImage(image, src, size, crossOrigin, imageState, color);\n    iconImageCache.set(src, crossOrigin, color, iconImage);\n  }\n  return iconImage;\n}\n\nexport default IconImage;\n", "/**\n * @module ol/style/Icon\n */\nimport EventType from '../events/EventType.js';\nimport IconAnchorUnits from './IconAnchorUnits.js';\nimport IconOrigin from './IconOrigin.js';\nimport ImageState from '../ImageState.js';\nimport ImageStyle from './Image.js';\nimport {asArray} from '../color.js';\nimport {assert} from '../asserts.js';\nimport {get as getIconImage} from './IconImage.js';\nimport {getUid} from '../util.js';\n\n/**\n * @typedef {Object} Options\n * @property {Array<number>} [anchor=[0.5, 0.5]] Anchor. Default value is the icon center.\n * @property {import(\"./IconOrigin.js\").default} [anchorOrigin='top-left'] Origin of the anchor: `bottom-left`, `bottom-right`,\n * `top-left` or `top-right`.\n * @property {import(\"./IconAnchorUnits.js\").default} [anchorXUnits='fraction'] Units in which the anchor x value is\n * specified. A value of `'fraction'` indicates the x value is a fraction of the icon. A value of `'pixels'` indicates\n * the x value in pixels.\n * @property {import(\"./IconAnchorUnits.js\").default} [anchorYUnits='fraction'] Units in which the anchor y value is\n * specified. A value of `'fraction'` indicates the y value is a fraction of the icon. A value of `'pixels'` indicates\n * the y value in pixels.\n * @property {import(\"../color.js\").Color|string} [color] Color to tint the icon. If not specified,\n * the icon will be left as is.\n * @property {null|string} [crossOrigin] The `crossOrigin` attribute for loaded images. Note that you must provide a\n * `crossOrigin` value if you want to access pixel data with the Canvas renderer.\n * See https://developer.mozilla.org/en-US/docs/Web/HTML/CORS_enabled_image for more detail.\n * @property {HTMLImageElement|HTMLCanvasElement} [img] Image object for the icon. If the `src` option is not provided then the\n * provided image must already be loaded. And in that case, it is required\n * to provide the size of the image, with the `imgSize` option.\n * @property {Array<number>} [offset=[0, 0]] Offset, which, together with the size and the offset origin, define the\n * sub-rectangle to use from the original icon image.\n * @property {Array<number>} [displacement=[0,0]] Displacement of the icon.\n * @property {import(\"./IconOrigin.js\").default} [offsetOrigin='top-left'] Origin of the offset: `bottom-left`, `bottom-right`,\n * `top-left` or `top-right`.\n * @property {number} [opacity=1] Opacity of the icon.\n * @property {number|import(\"../size.js\").Size} [scale=1] Scale.\n * @property {boolean} [rotateWithView=false] Whether to rotate the icon with the view.\n * @property {number} [rotation=0] Rotation in radians (positive rotation clockwise).\n * @property {import(\"../size.js\").Size} [size] Icon size in pixel. Can be used together with `offset` to define the\n * sub-rectangle to use from the origin (sprite) icon image.\n * @property {import(\"../size.js\").Size} [imgSize] Image size in pixels. Only required if `img` is set and `src` is not, and\n * for SVG images in Internet Explorer 11. The provided `imgSize` needs to match the actual size of the image.\n * @property {string} [src] Image source URI.\n */\n\n/**\n * @classdesc\n * Set icon style for vector features.\n * @api\n */\nclass Icon extends ImageStyle {\n  /**\n   * @param {Options} [opt_options] Options.\n   */\n  constructor(opt_options) {\n    const options = opt_options || {};\n\n    /**\n     * @type {number}\n     */\n    const opacity = options.opacity !== undefined ? options.opacity : 1;\n\n    /**\n     * @type {number}\n     */\n    const rotation = options.rotation !== undefined ? options.rotation : 0;\n\n    /**\n     * @type {number|import(\"../size.js\").Size}\n     */\n    const scale = options.scale !== undefined ? options.scale : 1;\n\n    /**\n     * @type {boolean}\n     */\n    const rotateWithView =\n      options.rotateWithView !== undefined ? options.rotateWithView : false;\n\n    super({\n      opacity: opacity,\n      rotation: rotation,\n      scale: scale,\n      displacement:\n        options.displacement !== undefined ? options.displacement : [0, 0],\n      rotateWithView: rotateWithView,\n    });\n\n    /**\n     * @private\n     * @type {Array<number>}\n     */\n    this.anchor_ = options.anchor !== undefined ? options.anchor : [0.5, 0.5];\n\n    /**\n     * @private\n     * @type {Array<number>}\n     */\n    this.normalizedAnchor_ = null;\n\n    /**\n     * @private\n     * @type {import(\"./IconOrigin.js\").default}\n     */\n    this.anchorOrigin_ =\n      options.anchorOrigin !== undefined\n        ? options.anchorOrigin\n        : IconOrigin.TOP_LEFT;\n\n    /**\n     * @private\n     * @type {import(\"./IconAnchorUnits.js\").default}\n     */\n    this.anchorXUnits_ =\n      options.anchorXUnits !== undefined\n        ? options.anchorXUnits\n        : IconAnchorUnits.FRACTION;\n\n    /**\n     * @private\n     * @type {import(\"./IconAnchorUnits.js\").default}\n     */\n    this.anchorYUnits_ =\n      options.anchorYUnits !== undefined\n        ? options.anchorYUnits\n        : IconAnchorUnits.FRACTION;\n\n    /**\n     * @private\n     * @type {?string}\n     */\n    this.crossOrigin_ =\n      options.crossOrigin !== undefined ? options.crossOrigin : null;\n\n    /**\n     * @type {HTMLImageElement|HTMLCanvasElement}\n     */\n    const image = options.img !== undefined ? options.img : null;\n\n    /**\n     * @private\n     * @type {import(\"../size.js\").Size|undefined}\n     */\n    this.imgSize_ = options.imgSize;\n\n    /**\n     * @type {string|undefined}\n     */\n    let src = options.src;\n\n    assert(!(src !== undefined && image), 4); // `image` and `src` cannot be provided at the same time\n    assert(!image || (image && this.imgSize_), 5); // `imgSize` must be set when `image` is provided\n\n    if ((src === undefined || src.length === 0) && image) {\n      src = /** @type {HTMLImageElement} */ (image).src || getUid(image);\n    }\n    assert(src !== undefined && src.length > 0, 6); // A defined and non-empty `src` or `image` must be provided\n\n    /**\n     * @type {import(\"../ImageState.js\").default}\n     */\n    const imageState =\n      options.src !== undefined ? ImageState.IDLE : ImageState.LOADED;\n\n    /**\n     * @private\n     * @type {import(\"../color.js\").Color}\n     */\n    this.color_ = options.color !== undefined ? asArray(options.color) : null;\n\n    /**\n     * @private\n     * @type {import(\"./IconImage.js\").default}\n     */\n    this.iconImage_ = getIconImage(\n      image,\n      /** @type {string} */ (src),\n      this.imgSize_ !== undefined ? this.imgSize_ : null,\n      this.crossOrigin_,\n      imageState,\n      this.color_\n    );\n\n    /**\n     * @private\n     * @type {Array<number>}\n     */\n    this.offset_ = options.offset !== undefined ? options.offset : [0, 0];\n    /**\n     * @private\n     * @type {import(\"./IconOrigin.js\").default}\n     */\n    this.offsetOrigin_ =\n      options.offsetOrigin !== undefined\n        ? options.offsetOrigin\n        : IconOrigin.TOP_LEFT;\n\n    /**\n     * @private\n     * @type {Array<number>}\n     */\n    this.origin_ = null;\n\n    /**\n     * @private\n     * @type {import(\"../size.js\").Size}\n     */\n    this.size_ = options.size !== undefined ? options.size : null;\n  }\n\n  /**\n   * Clones the style. The underlying Image/HTMLCanvasElement is not cloned.\n   * @return {Icon} The cloned style.\n   * @api\n   */\n  clone() {\n    const scale = this.getScale();\n    return new Icon({\n      anchor: this.anchor_.slice(),\n      anchorOrigin: this.anchorOrigin_,\n      anchorXUnits: this.anchorXUnits_,\n      anchorYUnits: this.anchorYUnits_,\n      color:\n        this.color_ && this.color_.slice\n          ? this.color_.slice()\n          : this.color_ || undefined,\n      crossOrigin: this.crossOrigin_,\n      imgSize: this.imgSize_,\n      offset: this.offset_.slice(),\n      offsetOrigin: this.offsetOrigin_,\n      opacity: this.getOpacity(),\n      rotateWithView: this.getRotateWithView(),\n      rotation: this.getRotation(),\n      scale: Array.isArray(scale) ? scale.slice() : scale,\n      size: this.size_ !== null ? this.size_.slice() : undefined,\n      src: this.getSrc(),\n    });\n  }\n\n  /**\n   * Get the anchor point in pixels. The anchor determines the center point for the\n   * symbolizer.\n   * @return {Array<number>} Anchor.\n   * @api\n   */\n  getAnchor() {\n    let anchor = this.normalizedAnchor_;\n    if (!anchor) {\n      anchor = this.anchor_;\n      const size = this.getSize();\n      if (\n        this.anchorXUnits_ == IconAnchorUnits.FRACTION ||\n        this.anchorYUnits_ == IconAnchorUnits.FRACTION\n      ) {\n        if (!size) {\n          return null;\n        }\n        anchor = this.anchor_.slice();\n        if (this.anchorXUnits_ == IconAnchorUnits.FRACTION) {\n          anchor[0] *= size[0];\n        }\n        if (this.anchorYUnits_ == IconAnchorUnits.FRACTION) {\n          anchor[1] *= size[1];\n        }\n      }\n\n      if (this.anchorOrigin_ != IconOrigin.TOP_LEFT) {\n        if (!size) {\n          return null;\n        }\n        if (anchor === this.anchor_) {\n          anchor = this.anchor_.slice();\n        }\n        if (\n          this.anchorOrigin_ == IconOrigin.TOP_RIGHT ||\n          this.anchorOrigin_ == IconOrigin.BOTTOM_RIGHT\n        ) {\n          anchor[0] = -anchor[0] + size[0];\n        }\n        if (\n          this.anchorOrigin_ == IconOrigin.BOTTOM_LEFT ||\n          this.anchorOrigin_ == IconOrigin.BOTTOM_RIGHT\n        ) {\n          anchor[1] = -anchor[1] + size[1];\n        }\n      }\n      this.normalizedAnchor_ = anchor;\n    }\n    const displacement = this.getDisplacement();\n    return [anchor[0] - displacement[0], anchor[1] + displacement[1]];\n  }\n\n  /**\n   * Set the anchor point. The anchor determines the center point for the\n   * symbolizer.\n   *\n   * @param {Array<number>} anchor Anchor.\n   * @api\n   */\n  setAnchor(anchor) {\n    this.anchor_ = anchor;\n    this.normalizedAnchor_ = null;\n  }\n\n  /**\n   * Get the icon color.\n   * @return {import(\"../color.js\").Color} Color.\n   * @api\n   */\n  getColor() {\n    return this.color_;\n  }\n\n  /**\n   * Get the image icon.\n   * @param {number} pixelRatio Pixel ratio.\n   * @return {HTMLImageElement|HTMLCanvasElement} Image or Canvas element.\n   * @api\n   */\n  getImage(pixelRatio) {\n    return this.iconImage_.getImage(pixelRatio);\n  }\n\n  /**\n   * Get the pixel ratio.\n   * @param {number} pixelRatio Pixel ratio.\n   * @return {number} The pixel ratio of the image.\n   * @api\n   */\n  getPixelRatio(pixelRatio) {\n    return this.iconImage_.getPixelRatio(pixelRatio);\n  }\n\n  /**\n   * @return {import(\"../size.js\").Size} Image size.\n   */\n  getImageSize() {\n    return this.iconImage_.getSize();\n  }\n\n  /**\n   * @return {import(\"../ImageState.js\").default} Image state.\n   */\n  getImageState() {\n    return this.iconImage_.getImageState();\n  }\n\n  /**\n   * @return {HTMLImageElement|HTMLCanvasElement} Image element.\n   */\n  getHitDetectionImage() {\n    return this.iconImage_.getHitDetectionImage();\n  }\n\n  /**\n   * Get the origin of the symbolizer.\n   * @return {Array<number>} Origin.\n   * @api\n   */\n  getOrigin() {\n    if (this.origin_) {\n      return this.origin_;\n    }\n    let offset = this.offset_;\n\n    if (this.offsetOrigin_ != IconOrigin.TOP_LEFT) {\n      const size = this.getSize();\n      const iconImageSize = this.iconImage_.getSize();\n      if (!size || !iconImageSize) {\n        return null;\n      }\n      offset = offset.slice();\n      if (\n        this.offsetOrigin_ == IconOrigin.TOP_RIGHT ||\n        this.offsetOrigin_ == IconOrigin.BOTTOM_RIGHT\n      ) {\n        offset[0] = iconImageSize[0] - size[0] - offset[0];\n      }\n      if (\n        this.offsetOrigin_ == IconOrigin.BOTTOM_LEFT ||\n        this.offsetOrigin_ == IconOrigin.BOTTOM_RIGHT\n      ) {\n        offset[1] = iconImageSize[1] - size[1] - offset[1];\n      }\n    }\n    this.origin_ = offset;\n    return this.origin_;\n  }\n\n  /**\n   * Get the image URL.\n   * @return {string|undefined} Image src.\n   * @api\n   */\n  getSrc() {\n    return this.iconImage_.getSrc();\n  }\n\n  /**\n   * Get the size of the icon (in pixels).\n   * @return {import(\"../size.js\").Size} Image size.\n   * @api\n   */\n  getSize() {\n    return !this.size_ ? this.iconImage_.getSize() : this.size_;\n  }\n\n  /**\n   * @param {function(import(\"../events/Event.js\").default): void} listener Listener function.\n   */\n  listenImageChange(listener) {\n    this.iconImage_.addEventListener(EventType.CHANGE, listener);\n  }\n\n  /**\n   * Load not yet loaded URI.\n   * When rendering a feature with an icon style, the vector renderer will\n   * automatically call this method. However, you might want to call this\n   * method yourself for preloading or other purposes.\n   * @api\n   */\n  load() {\n    this.iconImage_.load();\n  }\n\n  /**\n   * @param {function(import(\"../events/Event.js\").default): void} listener Listener function.\n   */\n  unlistenImageChange(listener) {\n    this.iconImage_.removeEventListener(EventType.CHANGE, listener);\n  }\n}\n\nexport default Icon;\n"],
  "mappings": "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",
  "names": ["IconImageCache", "IconImage", "__extends", "Icon"]
}
